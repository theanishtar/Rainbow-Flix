<!doctype html>
<html lang="en">

<head>
	<title></title>
	<meta charset="utf-8">
	<meta property="og:title" content="rainbow-flix/${video.id }">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,700' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel="shortcut icon" href="../images/unicorn.png" type="image/x-icon">
	<!-- icon -->
	<link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="../css/style.css">
	<link rel="stylesheet" href="../css/contact.css">
	<link rel="stylesheet" href="../css/index.css">
	<link rel="stylesheet" href="../css/contact.css">
	<link rel="stylesheet" href="../css/about.css">
	<link rel="stylesheet" href="../css/button/btn.css">
	<link rel="stylesheet" href="../assets/css/responsive.css">
	<link rel="stylesheet" href="../css/footer.css">

	<link rel="shortcut icon" href="images/unicorn.png" type="image/x-icon">
	<!-- icon -->
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/contact.css">
	<link rel="stylesheet" href="css/index.css">
	<link rel="stylesheet" href="css/contact.css">
	<link rel="stylesheet" href="css/about.css">
	<link rel="stylesheet" href="css/button/btn.css">
	<link rel="stylesheet" href="assets/css/responsive.css">
	<link rel="stylesheet" href="css/footer.css">

	<script src="../cli/jquery.min.js"></script>
	<script src="../cli/angular.min.js"></script>
	<script src="../cli/angular-route.js"></script>
</head>
</head>

<body>

	<style>
		.main {
			display: flex;
		}

		i {
			font-size: 20px;
		}

		.like i,
		.views i,
		.dislike i {
			margin-bottom: -10px;
			color: #3F4344;
			color: red;
		}

		.action {
			display: flex;
			margin-top: 10px;
			justify-content: space-between;
		}

		.detail p {
			margin-right: 20px;
		}

		.lefta .one {
			margin-right: 20px;
		}

		.itemx {
			margin-bottom: 30px;
		}

		.itemx .leftx img {
			width: 100%;
		}

		.itemx .name p {
			letter-spacing: 1.2px;
			font-size: 15px;
			margin-top: 8px;
			color: white;
			width: 100%;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.itemx .views p,
		.itemx .like,
		.itemx .dislike {
			font-size: 15px;
		}

		.itemx i {
			font-size: 17px;
		}

		/* PC */
		@media (min-width : 64em) {
			.main .left {
				margin: 0 0;
				padding-right: 0px;
				padding-bottom: -70px;
			}

			.main .right {
				margin-left: 50px;
				padding-left: 0px;
				margin-top: 100px;
			}

			.video iframe {
				height: 500px;
			}
		}

		::-webkit-scrollbar {
			width: 0px;
		}

		/* Track */
		::-webkit-scrollbar-track {
			background: rgba(255, 255, 255, 0.259);
		}

		/* Mobile */
		@media (max-width : 46.1875em) {
			.main {
				display: block;
			}

			.video iframe {
				margin-top: 30px;
				height: 200px;
			}

			.action i {
				font-size: 20px;
			}

			.action a,
			.action p {
				font-size: 16px;
			}
		}
	</style>

	<div class="top-container">
		<h1>Rainbow Flix</h1>
		<p>Chúng tôi yêu phim, như yêu vợ bạn!</p>
	</div>



	<div style="z-index: 999;" class="header" id="myHeader">
		<section class="ftco-section">
			<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
				<div class="container">
					<a class="navbar-brand" style="width: 50px;" href="../index.html"><img style="width: 100%;"
							src="../images/unicorn.png" alt="" srcset=""></a>

					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
						aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
						<span class="fa fa-bars"></span> Menu
					</button>
					<div class="collapse navbar-collapse" id="ftco-nav">
						<ul class="navbar-nav m-auto">
							<li class="nav-item"><a href="../index.html" class="nav-link">Trang chủ</a></li>
							<!-- <li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown"
									aria-haspopup="true" aria-expanded="false">Page</a>
								<div class="dropdown-menu" aria-labelledby="dropdown04">
									<a class="dropdown-item" href="">Page 1</a>
									<a class="dropdown-item" href="">Page 2</a>
									<a class="dropdown-item" href="">Page 3</a>
									<a class="dropdown-item" href="">Page 4</a>
								</div>
							</li> -->
							<li class="nav-item"><a href="../pages/list.html" class="nav-link">Phim hay</a></li>

							<li class="nav-item"><a href="../pages/qna.html" class="nav-link">Hỏi đáp</a></li>
							<li class="nav-item"><a href="../pages/contact.html" class="nav-link">Liên hệ</a></li>
							<li class="nav-item"><a href="../pages/about.html" class="nav-link">Về chúng tôi</a></li>
						</ul>

						<ul class="navbar-nav">
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown"
									aria-haspopup="true" aria-expanded="false">Tài khoản</a>
								<div class="dropdown-menu" aria-labelledby="dropdown04">
									<a class="dropdown-item" href="../pages/login.html">Đăng nhập</a>
									<a class="dropdown-item" href="../pages/register.html">Đăng ký</a>
									<!-- <a class="dropdown-item" href="">Đăng xuất</a> -->
								</div>
							</li>
						</ul>
					</div>

				</div>
			</nav>
			<!-- END nav -->
		</section>
	</div>

	<div class="content">
		<div class="main">
			<div class="col-sm-9 left">
				<h1>{{videoDetails.title}}</h1>
				<div class="video" style="margin-top: -20px; ">
					<div id="vdl">
						<!-- <iframe id="frame" style="width: 100%;" src="{{ link }}" title="YouTube video player" frameborder="0"
							allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
							allowfullscreen> </iframe> -->
					</div>

					<div class="action">
						<div class="lefta" style="display: flex;">

							<div ng-show="{{flagLike}}">
								<!-- href="/video?action=like&id=${video.id}" -->
								<a onclick="change(this)" class="one"><i style="color: red;" class='bx bxs-like'></i>
									{{video.likes}}</a>
							</div>
							<div ng-hide="{{flagLike}}">
								<a onclick="change(this)" id="videoDetails-{{videoDetails.id}}" class="one"><i
										style="color: #808080;" class='bx bxs-like'></i> {{videoDetails.likes}}</a>
							</div>
							<!-- <c:if test="${flagLike == true}">

							</c:if>
							<c:if test="${flagLike == false}">
								
							</c:if> -->
							<a href="localhost:3000/video/like/" videoDetails.id><i class='bx bxs-share'></i
									style="color:#808080;">{{videoDetails.shares}}</a>
						</div>
						<div class="righta">
							<p>
								<i class='bx bx-show-alt'></i>{{videoDetails.views}} lượt xem
							</p>
						</div>
					</div>

					<!-- <div class="action">
						<div class="lefta">
							<a class="one"><i class='bx bxs-like'></i style="color:#808080;"> ${video.likes}</a> <a><i
									class='bx bxs-share'></i style="color:#808080;">${video.shares }</a>
						</div>
						<div class="righta">
							<p>
								<i class='bx bx-show-alt'></i>${video.views } lượt xem
							</p>
						</div>
					</div> -->

					<!-- <video src="{{video.href}}" width="100%" controls>
					</video> -->
					<!-- <c:choose>
						<c:when test="${not empty currentUser}">
							<div class="action">
								<div class="lefta">

									<c:if test="${flagLike == true}">
										<a onclick="change(this)" href="<c:url value='/video?action=like&id=${video.id}'/>"
											class="one"><i style="color: red;" class='bx bxs-like'></i>
											${video.likes}</a>
									</c:if>
									<c:if test="${flagLike == false}">
										<a onclick="change(this)" href="<c:url value='/video?action=like&id=${video.id}'/>"
											class="one"><i style="color: #808080;" class='bx bxs-like'></i> ${video.likes}</a>
									</c:if>
									<a href="<c:url value='/video?action=share&id=${video.id}'/>"><i class='bx bxs-share'></i
											style="color:#808080;">${video.shares }</a>
								</div>
								<div class="righta">
									<p>
										<i class='bx bx-show-alt'></i>${video.views } lượt xem
									</p>
								</div>
							</div>
						</c:when>

						<c:otherwise>
							<div class="action">
								<div class="lefta">
									<a class="one"><i class='bx bxs-like'></i style="color:#808080;"> ${video.likes}</a> <a><i
											class='bx bxs-share'></i style="color:#808080;">${video.shares }</a>
								</div>
								<div class="righta">
									<p>
										<i class='bx bx-show-alt'></i>${video.views } lượt xem
									</p>
								</div>
							</div>
						</c:otherwise>
					</c:choose> -->

				</div>

				<h6>Chi tiết</h6>
				<p class="descript-title">
					Tên phim: {{videoDetails.title}} <br> Ngày tải lên:{{videoDetails.date}}
				</p>

				<h6>Mô tả</h6>
				<p class="descript-title">{{videoDetails.description}}</p>
			</div>
			<div class="col-sm-3 right" style="margin-top: 58px;">
				<h1 style="display: block;">Đề xuất</h1>
				<div class="listx" style=" overflow-y: scroll; max-height: 800px;">
					<div class="itemx" ng-repeat="item in trend">
						<div class="leftx">
							<img src="images/thumnail/{{item.poster}}" alt="">
						</div>
						<div class="rightx">
							<div class="name">
								<p>{{item.title}}</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


	</div>

	<div class="content">
		<div class="comment">
			<h1>Bình luận</h1>
			<script src="https://giscus.app/client.js" data-repo="dangtranhuu/rainbow-flix" data-repo-id="R_kgDOJMypAQ"
				data-category="General" data-category-id="DIC_kwDOJMypAc4CVDTT" data-mapping="og:title" data-strict="0"
				data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="dark"
				data-lang="en" crossorigin="anonymous" async>
				</script>
		</div>
	</div>

	<footer>
		<div class="top">
			<ul>
				<li><a href="">FGHHV</a></li>
				<li><a href="">DFGH</a></li>
				<li><a href="">PC0123</a></li>
				<li><a href="">FPOLY</a></li>
				<li><a href="">CANTHO</a></li>
			</ul>
		</div>

		<div class="mid">
			<p>Rainbow Flix là một trang web phát trực tuyến Phim miễn phí
				không có quảng cáo. Chúng tôi cho phép bạn xem phim trực tuyến mà
				không cần phải đăng ký hoặc trả tiền, với hơn 10000 bộ phim và
				TV-Series. Bạn cũng có thể Tải xuống phim đầy đủ từ MoviesCloud và
				xem sau nếu muốn.</p>
		</div>

		<div class="bot">
			<i class='bx bx-copyright'></i> <span>FroggyDev@FPT
				Polytechnic</span>
		</div>

	</footer>

	<script>
		window.onscroll = function () {
			myFunction()
		};

		var header = document.getElementById("myHeader");
		var sticky = header.offsetTop;

		function myFunction() {
			if (window.pageYOffset > sticky) {
				header.classList.add("sticky");
			} else {
				header.classList.remove("sticky");
			}
		}
	</script>
	<script src="../js/jquery.min.js"></script>
	<script src="../js/popper.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/main.js"></script>


	<script src="js/jquery.min.js"></script>
	<script src="js/popper.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/main.js"></script>
	<script type="text/javascript">
		function change(e) {
			let id = (e.id).substring(13)
			alert('like' + id);
			$.ajax({
				url: 'http://localhost:3000/video/like/id=' + id,
				method: 'PUT',
				success: function (response) {
					// like thành công
				},
				error: function (xhr, status, error) {
					// Xử lý lỗi
					console.error(error);
				}
			});
			//alert(e.querySelector('.bx').style.color);
			console.log(e.querySelector('.bx'))
			if (e.querySelector('.bx').style.color == 'red') {
				//alert("Change red to default")
				e.querySelector('.bx').style.color = "#808080"
			} else {
				//alert('change default to red')
				e.querySelector('.bx').style.color = "red"
			}
		}

		function actionLike() {
			id = document.querySelector("#idVideoDetails").innerText;
			$.ajax({
				url: 'http://localhost:3000/video/id=' + id,
				method: 'GET',
				success: function (response) {
					// alert(url)
					const { message, data } = response;
					//Này là thông báo với data nữa cần lưu data thì lây xài
					console.log(message, data);
					// xuất thhong báo
					alert(message);

					/*
						delay(2000).then(res => {
							// chuyển trang sau 2s
							window.location.href = "/pages/login.html";
						});
					*/
				},

				error: function (xhr, status, error) {
					// Xử lý lỗi
					console.error(error);
				}
			});
		}
	</script>
	<script>
		function loadDetails() {
			id = document.querySelector("#idVideoDetails").innerText;

			$.ajax({
				url: 'http://localhost:3000/video/id=' + id,
				method: 'GET',
				success: function (response) {
					// alert(url)
					const { message, data } = response;
					//Này là thông báo với data nữa cần lưu data thì lây xài
					console.log(message, data);
					// xuất thhong báo
					alert(message);

					/*
						delay(2000).then(res => {
							// chuyển trang sau 2s
							window.location.href = "/pages/login.html";
						});
					*/
				},

				error: function (xhr, status, error) {
					// Xử lý lỗi
					console.error(error);
				}
			});
		}
		loadDetails();
	</script>

	<!-- 	<script>
	function a(){
		alert(99)
	}
		
		$('#likevideodetail').click(function() {
			alert("h")
			let videoId = $('#videoid').val();
			alert(videoId)
			$.ajax({
				url = 'video?action=like&id=' + videoId
			}).then(function(data){
				let text = $('#likevideo').text();
				if(text.indexOf('like') != -1){
					$('#likevideo').text('Unlike');
				} else {
					$('#likevideo').text('like');
				}
			}).fail(function(error){
				alert('Loi')
			});
		});
	</script> -->

</body>

</html>